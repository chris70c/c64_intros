/*  Iceblocks Plus + Crack  Genesis Project (2018)  Christian Corti*/function intro(player) {"use strict";  function initialize() {    canvc.width  = 384;    canvc.height = 272;    canvx.imageSmoothingEnabled = false;    buf1c.width  = 320;    buf1c.height = 16;    buf1x.imageSmoothingEnabled = false;    buf2c.width  = 176;    buf2c.height = 32;    buf2x.imageSmoothingEnabled = false;    buf3c.width  = 304,    buf3c.height = 16;    buf3x.imageSmoothingEnabled = false;    buf4c.width  = 230;    buf4c.height = 252;    buf4x.imageSmoothingEnabled = false;    buf5c.width  = 384;    buf5c.height = 272;    buf5x.imageSmoothingEnabled = false;    print("iceblocks plus +", 0);    print("released on 08/01/2018", 16);    buf2x.globalCompositeOperation = "source-atop";    sprites();    canvc.addEventListener("click", exit);    function exit(e) {      canvc.removeEventListener("click", exit);      cancelAnimationFrame(afid);      canvx.fillStyle = c64[0];      canvx.fillRect(0,0,384,272);      canvx.drawImage(text, 41,227);      player.stop();    }    document.getElementById("frame").appendChild(canvc);    document.addEventListener("fsidPlay", draw);    player.play();  }  function print(text, y) {    let len = text.length;    for (let i = 0; i < len; i++) {      let cx = text.charCodeAt(i);      if (cx >= 96) { cx -= 96; }      buf2x.drawImage(font, (cx * 8),0,8,16, (i * 8),y,8,16);    }  }  function sprites() {    let t = document.createElement("canvas");    let c = t.getContext("2d");    t.width  = 120;    t.height = 126;    c.drawImage(logo, 0,0);    c.globalCompositeOperation = "source-atop";    let dx = 0;    let dy = 0;    let sy = 0;    let p = [9,9,6,2,9,11,15,12,11,0,0,0, 8,5,14,10,8,12,1,15,12,12,11,0, 7,13,3,15,10,15,1,1,15,15,12,11];    for (let i = 0; i < 36; i++) {      c.fillStyle = c64[p[i]];      c.fillRect(0,sy,120,42);      buf4x.drawImage(t,  0,sy,24,42, dx,dy,24,42);      buf4x.drawImage(t, 25,sy,23,42, (24 + dx),dy,23,42);      buf4x.drawImage(t, 48,sy,68,42, (47 + dx),dy,68,42);      dy += 42;      if (dy == 252) {        dy = 0;        if (dx == 115) {          sy += 42;          dx = 0;        } else {          dx = 115;        }      }    }  }  function updatePanels() {    if (bg_itr < 8) {      if (--bg_ctr == 0) {        bg_ctr = 4;        bg_idx++;        bg_itr++;      }    }    let idx = bg_idx;    buf5x.fillStyle = c64[bg_cols[idx++]];    buf5x.fillRect(0,0,384,36);    buf5x.fillStyle = c64[bg_cols[idx++]];    buf5x.fillRect(0,38,384,46);    buf5x.fillStyle = c64[bg_cols[idx++]];    buf5x.fillRect(0,86,384,46);    buf5x.fillStyle = c64[bg_cols[idx++]];    buf5x.fillRect(0,134,384,46);    buf5x.fillStyle = c64[bg_cols[idx++]];    buf5x.fillRect(0,182,384,46);    buf5x.fillStyle = c64[bg_cols[idx]];    buf5x.fillRect(0,230,384,42);    buf5x.fillStyle = c64[0];    buf5x.fillRect(0, 36,384,2);    buf5x.fillRect(0, 84,384,2);    buf5x.fillRect(0,132,384,2);    buf5x.fillRect(0,180,384,2);    buf5x.fillRect(0,228,384,2);  }  function updatePosition() {    for (let i = 0; i < 18; i++) {      sp_val[i] = (++sp_val[i]) & 255;    }  }  function updateText() {    if (--fl1_ctr == 0) {      fl1_ctr = 2;      if (++fl1_idx == 65) {        fl1_idx = 0;      }    }    if (--fl2_ctr == 0) {      fl2_ctr = 2;      if (++fl2_idx == 65) {        fl2_idx = 0;      }      buf2x.fillStyle = c64[fl_cols[fl2_idx]];      buf2x.fillRect(0,0,128,15);    }    if (--fl3_ctr == 0) {      fl3_ctr = 2;      if (++fl3_idx == 65) {        fl3_idx = 0;      }      buf2x.fillStyle = c64[fl_cols[fl3_idx]];      buf2x.fillRect(0,16,176,15);    }    if (--fl4_ctr == 0) {      fl4_ctr = 2;      if (++fl4_idx == 65) {        fl4_idx = 0;      }    }    sc_off -= sc_spd;    if (sc_off < 0) {      sc_off += 8;      do {        let cx = sc_text.charCodeAt(sc_pos++);        if (cx >= 64 && cx <= 74) {          switch (cx) {            case 65:              break;            case 73:              bg_ena = 1;              break;            case 74:              sp_ena = 1;              break;            default:              sc_spd = cx - 63;              break;          }          continue;        }        buf1x.globalCompositeOperation = "copy";        buf1x.drawImage(buf1c, 8,0,312,16, 0,0,312,16);        buf1x.globalCompositeOperation = "source-over";        if (cx >= 96) { cx -= 96; }        cx *= 8;        buf1x.drawImage(font, cx,0,8,16, 312,0,8,16);        if (sc_pos == sc_len) {          sc_pos = 0;        }        break;      } while (true);    }    if (--tw_ctr == 0) {      tw_ctr = 2;      let cx = tw_text.charCodeAt(tw_pos++);      if (cx >= 96) { cx -= 96; }      cx *= 8;      buf3x.clearRect(tw_org,0,8,16);      buf3x.drawImage(font, cx,0,8,16, tw_org,0,8,16);      tw_org += 8;      if (tw_org == 304) {        tw_ctr = 68;        tw_org = 0;        if (tw_pos == tw_len) {          tw_pos = 0;        }      } else {        buf3x.drawImage(font, 0,0,8,16, tw_org,0,8,16);      }    }    buf1x.globalCompositeOperation = "source-atop";    buf1x.fillStyle = c64[fl_cols[fl1_idx]];    buf1x.fillRect(0,0,312,16);    buf1x.globalCompositeOperation = "source-over";    buf5x.drawImage(buf1c, (7 - sc_off),0,304,16, 40,51,304,16);    buf5x.drawImage(buf2c, 0, 0,128,15, 128, 99,128,15);    buf5x.drawImage(buf2c, 0,16,176,15, 104,147,176,15);    buf3x.globalCompositeOperation = "source-atop";    buf3x.fillStyle = c64[fl_cols[fl4_idx]];    buf3x.fillRect(0,0,304,16);    buf3x.globalCompositeOperation = "source-over";    buf5x.drawImage(buf3c, 40,195);  }  function drawSprites() {    if (sp_enab[0]) {      buf5x.drawImage(buf4c, 71,7,44,35, (36 + sp_sine[sp_val[1]]),0,44,35);      buf5x.drawImage(buf4c, 47,7,24,35, (36 + sp_sine[sp_val[2]]),0,24,35);      buf5x.drawImage(buf4c,  0,7,47,35, ( 1 + sp_sine[sp_val[0]]),0,47,35);    }    if (sp_enab[1]) {      buf5x.drawImage(buf4c, 71,42,44,42, (36 + sp_sine[sp_val[4]]),41,44,42);      buf5x.drawImage(buf4c, 47,42,24,42, (36 + sp_sine[sp_val[5]]),41,24,42);      buf5x.drawImage(buf4c,  0,42,47,42, ( 1 + sp_sine[sp_val[3]]),41,47,42);    }    if (sp_enab[2]) {      buf5x.drawImage(buf4c, 71,84,44,42, (36 + sp_sine[sp_val[7]]),89,44,42);      buf5x.drawImage(buf4c, 47,84,24,42, (36 + sp_sine[sp_val[8]]),89,24,42);      buf5x.drawImage(buf4c,  0,84,47,42, ( 1 + sp_sine[sp_val[6]]),89,47,42);    }    if (sp_enab[3]) {      buf5x.drawImage(buf4c, 71,126,44,42, (36 + sp_sine[sp_val[10]]),137,44,42);      buf5x.drawImage(buf4c, 47,126,24,42, (36 + sp_sine[sp_val[11]]),137,24,42);      buf5x.drawImage(buf4c,  0,126,47,42, ( 1 + sp_sine[sp_val[9]]),137,47,42);    }    if (sp_enab[4]) {      buf5x.drawImage(buf4c, 71,168,44,42, (36 + sp_sine[sp_val[13]]),185,44,42);      buf5x.drawImage(buf4c, 47,168,24,42, (36 + sp_sine[sp_val[14]]),185,24,42);      buf5x.drawImage(buf4c,  0,168,47,42, ( 1 + sp_sine[sp_val[12]]),185,47,42);    }    if (sp_enab[5]) {      buf5x.drawImage(buf4c, 71,210,44,37, (36 + sp_sine[sp_val[16]]),235,44,37);      buf5x.drawImage(buf4c, 47,210,24,37, (36 + sp_sine[sp_val[17]]),235,24,37);      buf5x.drawImage(buf4c,  0,210,47,37, ( 1 + sp_sine[sp_val[15]]),235,47,37);    }  }  function intro() {    buf5x.fillStyle = c64[0];    buf5x.fillRect(0,84,384,188);    updatePosition();    buf5x.fillStyle = c64[p1_cols[p1_col]];    buf5x.fillRect(0,38,384,46);    if (--p1_ctr == 0) {      p1_ctr = 4;      p1_col++;      if (p1_col == 9) {        p1_ctr = 70;      } else if (p1_col == 20) {        p1_ctr = 0;      }    }    updateText();    if (p1_ctr == 61) {      p1_spr = 1;      p1_sct = 4;    }    if (p1_spr) {      buf5x.drawImage(buf4c, 186,p1_pos,44,42, (36 + sp_sine[sp_val[4]]),41,44,42);      buf5x.drawImage(buf4c, 162,p1_pos,24,42, (36 + sp_sine[sp_val[5]]),41,24,42);      buf5x.drawImage(buf4c, 115,p1_pos,47,42, ( 1 + sp_sine[sp_val[3]]),41,47,42);      if (--p1_sct == 0) {        p1_sct = 4;        p1_pos += 42;        if (p1_pos == 84) {          p1_sct = 90;        } else if (p1_pos == 252) {          p1_spr = 0;        }      }    }    if (bg_ena) {      updatePanels();      timer.call = ready;    }    canvx.drawImage(buf5c, 0,0);    fsidPlayer.run();  }  function ready() {    updatePosition();    updatePanels();    updateText();    if (sp_ena) {      drawSprites();      if (--sp_ctr == 0) {        sp_ctr = 4;        sp_enab[sp_ena] = 1;        if (++sp_ena == 6) {          sp_enab[0] = 1;          sp_ctr = 260;          sp_pos = 0;          timer.call = draw;          for (let i = 0; i < 8; i++) {            bg_cols[i] = bg_cols[36 + i];          }        }      }    }    canvx.drawImage(buf5c, 0,0);    fsidPlayer.run();  }  function draw() {    updatePosition();    updatePanels();    updateText();    drawSprites();    if (--sp_ctr == 0) {      sp_ctr = 290;      bg_itr = 0;      bg_ctr = 4;      switch (sp_pos) {        case 1:          bg_idx = 28;          break;        case 0:        case 2:          bg_idx = 14;          break;        case 3:          bg_idx = 0;          break;      }      sp_val = [...sp_anim[sp_pos]];      if (++sp_pos == 4) {        sp_pos = 0;      }    }    canvx.drawImage(buf5c, 0,0);    player.run();    afid = requestAnimationFrame(draw);  }  const font = new Image();  const logo = new Image();  const text = new Image();  font.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAAQAQMAAABa/1ULAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAYFJREFUOMuF0T1OxDAQBeCpXLmgdMUZpopSIJ/FlasIUVIgjkHJWaZ6lUWJUu0ZqJCLlSEzdhC7y8+TYo/j5NNYplZ7cIwQwOoPaBpZOOsYPNvK1bsYr+tNu59tPVPzPaCkgNVkgDsBQuiAl5SuKYlfbL1Qcz0ggdxmq0+BYiP7DjgSTCTiYGtQwwgDEicrg41+ALTY5K908mBg0v+/AQIRATvI0zO2yF/AKzuXDWDr6BTAyzcg7EDrwKwvwgD8APwGlB3YCqCgJAWWHM46aDvgsQFLJk2gdlgF63o4sFsVWLHOCswTnwEPj/SowM38XtcwTwMYHWDvQFC8deD4pyPwKyfvfAm2b7vADqADcArApbMOlgGIXnrAP8DTJQCd0gAYjnZAo4AVZgUgAkJ7OkAGgAXOvibLJVAUKLe/ADKABHx1UHLJksEFGciyoAS9yDIA7lMI20MsmaW4klMuX0CNNUrEsWrfWtUQ34DaTgDPHYjHVl2NKdb9CHQWT7+G6TKfMDFet74F7SAAAAAASUVORK5CYII=";  logo.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB+AQMAAADV80eMAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAlBJREFUOMuNlEGq7CAQRQtqKvRWhEwD2XpBTwPZiuBU8F/vjW3yR69eJ54TUxa29drMTTEhZXvB0aQEDmFP6L3IARoqdUI/pRO6WV7AwW+fwxU3jHGWJ7zdR6KqL6h4mAQciy7dlL8VC0FmDYcLxFcJwRnmwE9Jngckg/vRi6cg8NHRwzOh4TK8j0kAYx9uLpieU55eOJ8SYHmg2tMt29vD8nIulZannSAPsy6YvvU8neHNHpHtaiFQYPfPeey63jD7IuwZqZ83aFD5tT7KCzR47+2Gn38JbeU/wS8mCtaLC3wPe8FH+oN02gtcr00I+2ab8G65qi8myzK37hJC/2+1llX0UHXv8IRPhQK8Fjz26HhHAHevJw5cEMj1b0twAt9H+5hgG4fvVzE/Y0ANuIW5bYLRxh7IPgXaA6Z2wNpzsQaQnzzbC7C+s+IOkGfcchLMUy4E+ZcuUBzfR4d4apXuSsjWrQsY+3balQlZpZs3gQ7lyr4HIfj4gz8B57c9UhUo/4gjBPRWbTszobCeygPU9p9RPgZo/TRacu1v9dWK3t5wdekE72FP8IPDAq7/gI0DQW0mB8hTyAWFH0IaEPwuF2hSoHzeeI382nvQa6OXXu/EprTD4AR5wi0R5Lu5fJdnbOzTCAjHoH6ePrJDoJ8XzLtAP2QwB8gPzQPkG90CQO/0CAD9Gu6WCTw8eLIMoO+NvZt8hwPH7o8YQE91lCLc86MGgc5/i4ugfmnATtD7GX4Q8m97naD1A1cnKD9QjvNyx7Vdgum9DRikuHb7a/wDAKlkDqq+PocAAAAASUVORK5CYII=";  text.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAS0AAAAHAQMAAABnbYlJAAAABlBMVEUAAAC2trVtIHVQAAAAl0lEQVQY003PsQkDUQwDUA2QATKGRsoYGk9VKtXhFzdCCL+8woT4fg6SwiDDw8iQZmFKgCrYOYG7ArqDWGZKEpJhjASIg2gArwRyh5toPclc4cTsAWwxh38fwWkWOkV6sYnFtknsFeAhohYrupppMX9ZrGPrbhfhd20jL9fVjWe30BnNEsbjZDm6/X/qwDk/TXVQWM0kfQBNyYdzUAlcYwAAAABJRU5ErkJggg==";  const canvc = document.createElement("canvas");  const canvx = canvc.getContext("2d", {alpha:false});  const buf1c = document.createElement("canvas");  const buf1x = buf1c.getContext("2d");  const buf2c = document.createElement("canvas");  const buf2x = buf2c.getContext("2d");  const buf3c = document.createElement("canvas");  const buf3x = buf3c.getContext("2d");  const buf4c = document.createElement("canvas");  const buf4x = buf4c.getContext("2d");  const buf5c = document.createElement("canvas");  const buf5x = buf5c.getContext("2d", {alpha:false});  const c64 = ["#000","#fff","#af2a29","#62d8cc","#b03fb6","#4ac64a","#3739c4","#e4ed4e","#b6591c","#683808","#ea746c","#4d4d4d","#848484","#a6fa9e","#707ce6","#b6b6b5"];  const sc_text = "B                           genesis project proudly presents iceblox plus by legend karl hornell 2018, I trained by lastyleJ and supplied by demongerx and hedning. greetings to triad, atlantis, nostalgia, excess, f4cg, fairlight, laxity, mayday and alpha flight. call our boards for the latest stuff. lastyle signing off 2017-01-08...                         ";  const sc_len = sc_text.length;  const tw_text = "     visit the g*p and atl hq at:        the-hidden.hopto.org port 64128            greetings fly out to:                triad - atlantis - f4cg         mayday - alpha flight - hokuto force           excess -  nostalgiai                                              ";  const tw_len = tw_text.length;  const p1_cols = [0,6,14,3,7,1,7,3,14,6, 14,3,7,1,7,3,14,6,0];  const bg_cols = [0,0,0,0,0,0,0,0,6,4,14,3,13,7, 6,4,14,3,13,7,1,1,11,12,15,3,13,7, 11,12,15,3,13,7,1,1,9,8,4,2,10,7,1,1];  const sp_anim = [[0,128,64,16,144,90,32,160,106,48,176,122,64,192,138,80,208,154],[96,80,90,80,64,74,64,48,58,48,32,42,32,16,26,16,0,10],[20,10,15,200,190,195,40,30,35,160,150,155,80,70,75,120,110,115],[8,0,4,16,8,12,24,16,20,32,24,28,40,32,36,48,40,44]];  const sp_sine = [143,140,137,135,132,130,127,124,122,119,117,114,112,109,107,105,102,100,97,95,93,91,88,86,84,82,80,78,76,74,72,70,68,66,64,63,61,59,58,56,55,54,52,51,50,49,47,46,45,44,43,43,42,41,41,40,39,39,39,38,38,38,38,38,38,38,38,38,38,38,39,39,40,40,41,42,42,43,44,45,46,47,48,49,50,52,53,54,56,57,59,60,62,64,65,67,69,71,73,75,77,79,81,83,85,87,89,92,94,96,99,101,103,106,108,111,113,116,118,121,123,126,128,131,133,136,139,141,144,146,149,152,154,157,159,162,164,167,169,172,174,177,179,182,184,186,189,191,193,196,198,200,202,204,206,208,210,212,214,216,218,220,221,223,225,226,228,229,231,232,233,235,236,237,238,239,240,241,242,243,243,244,245,245,246,246,247,247,247,247,247,247,247,247,247,247,247,246,246,246,245,244,244,243,242,242,241,240,239,238,236,235,234,233,231,230,229,227,226,224,222,221,219,217,215,213,211,209,207,205,203,201,199,197,194,192,190,188,185,183,180,178,176,173,171,168,166,163,161,158,155,153,150,148,145,143];  const sp_enab = [0,0,0,0,0,0];  const fl_cols = [1,1,1,7,15,12,11,0,11,12,15,7,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];  let p1_ctr = 20;  let p1_col = 0;  let p1_spr = 0;  let p1_sct = 0;  let p1_pos = 0;  let fl1_ctr = 4;  let fl1_idx = 0;  let fl2_ctr = 4;  let fl2_idx = 16;  let fl3_ctr = 4;  let fl3_idx = 32;  let fl4_ctr = 4;  let fl4_idx = 48;  let sc_off = 202;  let sc_pos = 0;  let sc_spd = 2;  let tw_ctr = 2;  let tw_pos = 0;  let tw_org = 0;  let bg_ena = 0;  let bg_itr = 0;  let bg_ctr = 4;  let bg_idx = 0;  let sp_ena = 0;  let sp_ctr = 4;  let sp_pos = 1;  let sp_val = [...sp_anim[sp_pos]];  let afid = 0;  setTimeout(initialize, 100);}